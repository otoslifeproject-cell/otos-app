<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OTOS — Cockpit v7</title>

  <style>
    :root{
      --bg:#0f1115; --panel:#171a21; --panel2:#1f2430;
      --text:#e6e8ee; --muted:#9aa0b3; --accent:#ff8b20;
      --ok:#39d98a; --radius:18px;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:1100px;margin:0 auto;padding:26px}
    h1{margin:0 0 16px;font-size:28px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    .card{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);padding:18px
    }
    .label{color:var(--muted);font-size:12px;margin-bottom:6px}
    .focus{
      font-size:22px;font-weight:900;color:var(--accent)
    }
    .signals .item{
      padding:12px 0;border-bottom:1px solid rgba(255,255,255,.06)
    }
    .signals .item:last-child{border-bottom:none}
    .item .title{font-weight:800}
    .item .meta{color:var(--muted);font-size:12px;margin-top:4px}
    .health{
      display:flex;align-items:center;gap:10px;font-weight:800
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--ok)
    }
    .actions{display:flex;gap:10px;margin-top:10px}
    .actions button{
      padding:10px 14px;border-radius:12px;border:none;
      background:rgba(255,139,32,.15);color:var(--accent);
      font-weight:800;cursor:pointer
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Command Cockpit</h1>

    <div class="grid">
      <!-- LEFT -->
      <div class="card">
        <div class="label">Today’s Focus</div>
        <div class="focus" id="focusText">Build & Observe</div>

        <div style="margin-top:18px" class="label">Latest Signals</div>
        <div class="signals" id="signalsList"></div>
      </div>

      <!-- RIGHT -->
      <div class="card">
        <div class="label">System Health</div>
        <div class="health">
          <div class="dot"></div>
          <div>All systems stable</div>
        </div>

        <div class="label" style="margin-top:18px">Quick Actions</div>
        <div class="actions">
          <button onclick="go('feeder.html')">Open Feeder</button>
          <button onclick="go('signals-classified.html')">View Signals</button>
        </div>
      </div>
    </div>
  </div>

<script>
  function go(view){
    // Ask parent shell to navigate
    window.parent.document.getElementById("view").src = view;
  }

  function render(){
    if (!window.parent.OTOS_STATE) return;

    const state = window.parent.OTOS_STATE.getState();
    const list = document.getElementById("signalsList");
    list.innerHTML = "";

    state.signals.slice(0,5).forEach(s=>{
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <div class="title">${s.title}</div>
        <div class="meta">${s.confidence} · ${s.source.join(", ")}</div>
      `;
      list.appendChild(div);
    });
  }

  window.addEventListener("load", render);
  window.parent.addEventListener("otos:state-updated", render);
</script>
</body>
</html>
