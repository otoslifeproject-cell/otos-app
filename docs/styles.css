<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OTOS · Parent Control</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

  <div class="topbar">
    <img src="./brand/logo/otos-logo-400.png" class="logo" />
    <div class="title">Parent · Core Control</div>
  </div>

  <div id="app">
    <div class="column" id="left"></div>
    <div class="column" id="center"></div>
    <div class="column" id="right"></div>
  </div>

<script>
fetch("./registry.json")
  .then(r => r.json())
  .then(data => {
    const items = Array.isArray(data) ? data : data.modules || [];
    render(items);
  })
  .catch(err => {
    document.body.innerHTML = "Registry load failed";
    console.error(err);
  });

function render(items) {
  const slots = {
    left: document.getElementById("left"),
    center: document.getElementById("center"),
    right: document.getElementById("right")
  };

  Object.values(slots).forEach(col => col.innerHTML = "");

  items
    .filter(m => m.enabled !== false)
    .forEach(m => {
      const card = document.createElement("div");
      card.className = "card";
      card.textContent = m.name || m.id;

      const slot = m.slot || "center";
      (slots[slot] || slots.center).appendChild(card);
    });
}
</script>

</body>
</html>
