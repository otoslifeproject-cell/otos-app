<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OTOS Cockpit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<div class="cockpit-shell">

  <!-- HEADER -->
  <header class="cockpit-header glass">
    <h1>OTOS Cockpit</h1>
    <div class="meta">CEO Context Â· Render Layer</div>
  </header>

  <!-- PRIMARY SINGLE ACTION -->
  <section class="psa-zone glass" id="psa" onclick="focusPSA()">
    <div class="psa-label">Primary Single Action</div>
    <h2>Define next cockpit layer</h2>
    <p>This is the one thing that matters now.</p>
  </section>

  <!-- STACK -->
  <section class="stack-zone" id="stack">
    <div class="stack-card glass" onclick="focusCard(this,0)">
      Prepare screenshot route list for sales animation
    </div>
    <div class="stack-card glass" onclick="focusCard(this,1)">
      Draft MD cockpit default modules for OTOS Life
    </div>
    <div class="stack-card glass" onclick="focusCard(this,2)">
      Validate Spine â†’ Cockpit authority boundaries
    </div>
    <div class="stack-card glass" onclick="focusCard(this,3)">
      Confirm demo routes for focus switching
    </div>
  </section>

  <!-- PA ZONE -->
  <aside class="pa-zone glass draggable" id="pa">
    <div class="pa-title">PA Zone</div>
    <div class="pa-sub">Personal assistant Â· regulation Â· capture</div>
    <button class="pa-action">ðŸŽ™ Capture thought</button>
    <button class="pa-action">ðŸ§  Reality check</button>
    <button class="pa-action">ðŸŒ¬ Reset</button>
  </aside>

  <footer class="cockpit-footer">
    Render-only Â· Single Task Truth Â· Spine-authoritative
  </footer>

</div>

<div class="blur-layer" id="blur"></div>

<script>
/* ---------- FOCUS LOGIC ---------- */

function resetFocus() {
  document.body.classList.remove('blurred');
  document.querySelectorAll('.stack-card').forEach(c=>{
    c.classList.remove('focused','offset');
  });
  document.getElementById('psa').classList.remove('focused');
}

function focusPSA() {
  resetFocus();
  document.body.classList.add('blurred');
  document.getElementById('psa').classList.add('focused');
}

function focusCard(el,index) {
  resetFocus();
  document.body.classList.add('blurred');
  el.classList.add('focused');

  document.querySelectorAll('.stack-card').forEach((c,i)=>{
    if(c!==el){
      c.classList.add('offset');
      c.style.transform = `translate(${(i-index)*40}px, ${(i-index)*12}px) scale(0.96)`;
    }
  });
}

/* ---------- DRAG ZONE (TEMP) ---------- */

const drag = document.querySelector('.draggable');
let isDown=false, offset=[0,0];

drag.addEventListener('mousedown',e=>{
  isDown=true;
  offset=[drag.offsetLeft-e.clientX, drag.offsetTop-e.clientY];
});

document.addEventListener('mouseup',()=>isDown=false);
document.addEventListener('mousemove',e=>{
  if(!isDown) return;
  drag.style.left = (e.clientX+offset[0])+'px';
  drag.style.top  = (e.clientY+offset[1])+'px';
});
</script>

</body>
</html>
