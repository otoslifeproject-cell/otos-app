<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Cockpit – Environment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
/* =========================
   ROOT / ENVIRONMENT
========================= */
:root{
  --bg:#eef4fb;
  --card:#ffffff;
  --ink:#0f172a;
  --muted:#475569;
  --border:rgba(0,0,0,.08);
  --shadow:0 20px 40px rgba(15,23,42,.12);
  --soft:0 10px 24px rgba(15,23,42,.08);
  --radius:18px;
  --accent:#ff7a18;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  height:100%;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
  background:radial-gradient(circle at top, #f6f9ff, var(--bg));
  color:var(--ink);
  overflow:hidden;
}

/* =========================
   ENVIRONMENT FRAME
========================= */
#environment{
  position:fixed;
  inset:16px;
  border-radius:24px;
  background:
    linear-gradient(135deg, rgba(255,255,255,.55), rgba(255,255,255,.2)),
    repeating-linear-gradient(
      135deg,
      rgba(0,0,0,.025) 0px,
      rgba(0,0,0,.025) 1px,
      transparent 1px,
      transparent 12px
    );
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.04);
  overflow:hidden;
}

/* watermark */
#environment::after{
  content:"COCKPIT";
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  font-size:22vw;
  font-weight:800;
  letter-spacing:.1em;
  color:rgba(15,23,42,.04);
  pointer-events:none;
  padding:5vw;
}

/* =========================
   GRID
========================= */
#grid{
  position:relative;
  z-index:1;
  display:grid;
  grid-template-columns:repeat(3, minmax(280px,1fr));
  grid-auto-rows:min-content;
  gap:28px;
  padding:28px;
}

/* =========================
   VEIL (FOCUS ONLY)
========================= */
#veil{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,.08);
  opacity:0;
  pointer-events:none;
  transition:opacity .25s ease;
  z-index:9;
}
#veil.on{
  opacity:1;
  pointer-events:auto;
}

/* =========================
   ZONES
========================= */
.zone{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--soft);
  padding:18px 20px 20px;
  position:relative;
  transition:
    transform .25s ease,
    box-shadow .25s ease,
    opacity .25s ease;
}

/* top-left soft edge */
.zone::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  background:
    linear-gradient(135deg,
      rgba(0,0,0,.06),
      transparent 35%);
  pointer-events:none;
}

/* HEADER */
.zone-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.zone-title{
  font-weight:700;
}
.zone-sub{
  font-size:13px;
  color:var(--muted);
}

/* CONTROLS */
.zone-controls{
  display:flex;
  gap:8px;
}
.zone-controls button{
  width:30px;
  height:30px;
  border-radius:50%;
  border:none;
  background:#f1f5f9;
  cursor:pointer;
  font-weight:700;
}
.zone-controls button:hover{
  background:#e2e8f0;
}

/* BODY */
.zone-body{
  margin-top:14px;
  font-size:14px;
}

/* =========================
   STATES
========================= */
.zone.focused{
  z-index:12;
  box-shadow:var(--shadow);
}
.zone.blurred{
  opacity:.35;
}

/* 1st expand */
.zone.expanded{
  grid-column:span 2;
  grid-row:span 2;
  z-index:13;
}

/* 2nd expand */
.zone.maximized{
  position:fixed;
  inset:40px;
  z-index:20;
  box-shadow:0 40px 80px rgba(15,23,42,.25);
}

/* =========================
   ANDY INPUT
========================= */
input,textarea{
  width:100%;
  border-radius:12px;
  border:1px solid var(--border);
  padding:10px 12px;
  font-size:14px;
}
button.primary{
  background:var(--accent);
  color:white;
  border:none;
  border-radius:14px;
  padding:10px 18px;
  font-weight:700;
  cursor:pointer;
}

/* ========================= */
</style>
</head>

<body>

<div id="veil"></div>

<div id="environment">
  <div id="grid">

    <!-- PARENT -->
    <div class="zone" data-home>
      <div class="zone-header">
        <div>
          <div class="zone-title">PARENT</div>
          <div class="zone-sub">Authority · Contract · Lock</div>
        </div>
        <div class="zone-controls">
          <button class="expand">⤢</button>
          <button class="collapse">–</button>
        </div>
      </div>
      <div class="zone-body">
        Root authority surface.
      </div>
    </div>

    <!-- CORE -->
    <div class="zone" data-home>
      <div class="zone-header">
        <div>
          <div class="zone-title">CORE</div>
          <div class="zone-sub">Primary action surface</div>
        </div>
        <div class="zone-controls">
          <button class="expand">⤢</button>
          <button class="collapse">–</button>
        </div>
      </div>
      <div class="zone-body">
        Reserved.
      </div>
    </div>

    <!-- ANDY -->
    <div class="zone" data-home>
      <div class="zone-header">
        <div>
          <div class="zone-title">ANDY</div>
          <div class="zone-sub">Execution agent (OFF)</div>
        </div>
        <div class="zone-controls">
          <button class="expand">⤢</button>
          <button class="collapse">–</button>
        </div>
      </div>
      <div class="zone-body">
        <input placeholder="Drop or paste (visual only)" />
        <br/><br/>
        <input placeholder="Command" />
        <br/><br/>
        <button class="primary">Ingest</button>
      </div>
    </div>

    <!-- STATUS -->
    <div class="zone" data-home>
      <div class="zone-header">
        <div>
          <div class="zone-title">STATUS</div>
          <div class="zone-sub">Install · Constraints · Visibility</div>
        </div>
        <div class="zone-controls">
          <button class="expand">⤢</button>
          <button class="collapse">–</button>
        </div>
      </div>
      <div class="zone-body">
<pre>{
  "persistentAgent": false,
  "liveRAG": false,
  "backgroundProcess": false,
  "memoryLayers": {
    "windowLog": "DEFINED (not running)",
    "notion": "DEFINED (not running)",
    "archive": "DEFINED (not running)"
  },
  "hlr": "READY (manual GO only)"
}</pre>
      </div>
    </div>

  </div>
</div>

<script>
/* =========================
   FOCUS / EXPAND LOGIC
========================= */
const zones = [...document.querySelectorAll('.zone')];
const veil = document.getElementById('veil');

function defocus(){
  zones.forEach(z=>{
    z.classList.remove('focused','blurred');
  });
  veil.classList.remove('on');
}

function focusZone(target){
  zones.forEach(z=>{
    z.classList.toggle('focused', z===target);
    z.classList.toggle('blurred', z!==target);
  });
  veil.classList.add('on');
}

zones.forEach(zone=>{
  zone.addEventListener('click', e=>{
    if(e.target.closest('.zone-controls')) return;
    if(!zone.classList.contains('focused')){
      focusZone(zone);
    }
  });

  const expand = zone.querySelector('.expand');
  const collapse = zone.querySelector('.collapse');

  expand.addEventListener('click', e=>{
    e.stopPropagation();
    if(zone.classList.contains('maximized')){
      zone.classList.remove('maximized','expanded');
      defocus();
      return;
    }
    if(zone.classList.contains('expanded')){
      zone.classList.add('maximized');
      return;
    }
    defocus();
    zone.classList.add('expanded');
  });

  collapse.addEventListener('click', e=>{
    e.stopPropagation();
    zone.classList.remove('focused','expanded','maximized');
    defocus();
  });
});

veil.addEventListener('click', defocus);
window.addEventListener('keydown', e=>{
  if(e.key==='Escape') defocus();
});
</script>

</body>
</html>
