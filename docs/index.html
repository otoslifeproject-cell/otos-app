<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OTOS · Parent Control</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>

  <div class="topbar">
    <img class="logo" src="./brand/logo/otos-logo-400.png" />
    <div class="title">Parent · Core Control</div>
  </div>

  <div id="app">
    <div class="column" id="left"></div>
    <div class="column" id="center"></div>
    <div class="column" id="right"></div>
  </div>

  <script>
    const mount = document.getElementById('center');

    function openModule(id) {
      mount.innerHTML = '';
      const frame = document.createElement('iframe');
      frame.src = `./ui/${id}/index.html`;
      frame.style.width = '100%';
      frame.style.height = '420px';
      frame.style.border = '0';
      mount.appendChild(frame);
    }

    fetch('./registry.json')
      .then(r => r.json())
      .then(list => {
        list.forEach(m => {
          if (!m.enabled) return;

          const card = document.createElement('div');
          card.className = 'card';
          card.textContent = m.name;
          card.onclick = () => openModule(m.id);

          document.getElementById(m.slot).appendChild(card);
        });
      })
      .catch(() => {
        document.body.innerHTML = 'Registry failed to load';
      });
  </script>

</body>
</html>
